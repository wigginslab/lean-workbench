function MyCtrl1(){}function MeasurementsController(o,e,t,r,n){t.get(),r.get(),n.get()}function ExportController(){}function DashboardController(o,e,t,r,n){$("#login").hide(),$("#logout").show(),$(".datepicker").datepicker({minDate:0}),e.get("/api/v1/hypotheses").success(function(e){o.hypotheses=e.hypotheses}).error(function(o){console.log(o)}),o.show_form=!1,o.hypothesis_submit=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.defaults.headers.common["Content-Type"]="application/json",e.defaults.headers.common.Accept="application/json",e.post("/api/v1/hypotheses",JSON.stringify({name:o.name,twitter:o.twitter})).success(function(o){o.response.user?n.path("/onboarding/stick"):o.response.errors}).error(function(e){console.log("registration error"),o.errorMsg=e.reason})},o.formData={},o.create_hypothesis=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.defaults.headers.common["Content-Type"]="application/json",e.defaults.headers.common.Accept="application/json",e({method:"POST",url:"/api/v1/hypotheses",data:o.formData,headers:{"Content-Type":"application/json"}}).success(function(e){if(e.hasOwnProperty("response"))if(e.response.hasOwnProperty("errors")){var t=e.response.errors;t===void 0?n.path="/dashboard":(t.hasOwnProperty("end_date")&&(o.end_date_error=!0,o.errorMsg="Improper end date."),t.hasOwnProperty("start_date")&&(o.start_date=!0,o.errorMsg="Improper start date"),t.hasOwnProperty("google_analytics.")&&(o.google_analytics=!0,o.errorMsg="Improper endpoint"),t.hasOwnProperty("title")&&(o.title=!0,o.errorMsg="Improper title."))}else o.show_form=!1,window.location="/dashboard";else o.show_form=!1,window.location="/dashboard"}).error(function(e){console.log("hypothesis error"),o.errorMsg=e.reason})},o.new_hypothesis=function(){o.show_form=!0}}function CarouselController(o,e,t){o.scroll_to=function(o){e.hash(o),t()}}function ErrorPageController(){}function OnboardingController(){}function StickController(o,e){$("#login").hide(),$("#logout").show(),o.has_GA=!1,o.GA_auth=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.post("/connect/google-analytics").success(function(e){var t=e.status;if(e.hasOwnProperty("redirect_url")){var r=e.redirect_url;window.location=r}200==t&&(o.has_GA=!0)})},e.get("/api/v1/google-analytics").success(function(e){o.GA_profiles=e,o.has_GA=!0}).error(function(){}),o.submit_prof=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.post("/api/v1/google-analytics",JSON.stringify({metric:"profile-id",profile_id:o.user_profile})).success(function(o){200==o.status&&(window.location="/onboarding/virality")})}}function ViralityController(o,e,t){$("#login").hide(),$("#logout").show(),e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val();var r=t.get();r.length>0&&(o.FB=!0),o.has_FB=function(){return o.FB?!0:void 0},o.fb_auth=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.post("/connect/facebook").success(function(o){var e=o.redirect_url;null!=e&&open(e)}).error(function(){console.log("error"),o.FB_error="Facebook authentication failed."})},o.has_twitter=!1,e.get("/api/v1/twitter").success(function(e){console.log(e),e.twitter_authed&&(o.has_twitter=!0)}),o.has_fb=!1,e.get("/api/v1/facebook").success(function(e){e.fb_authed&&(o.has_fb=!0)}),o.twitter_auth=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.post("/connect/twitter").success(function(o){var e=o.status;if(100==e){var t=o.redirect_url;window.location=t}}).error(function(){o.twitter_error="Twitter authentication failed."})},o.done_onboarding=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.post("/api/v1/users",JSON.stringify({onboarded:!0})).success(function(){window.location="/dashboard"})}}function PayController(o,e){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.get("/api/v1/quickbooks").success(function(e){e.qb_authed&&(o.has_qb=!0)}),o.done_onboarding=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.post("/api/v1/users",JSON.stringify({onboarded:!0})).success(function(){window.location="/dashboard"})}}angular.module("LWBApp",["LWBAppServices","http-auth-interceptor","ngCookies","ngRoute"]).config(function(){$http.defaults.headers.common["Authentication-Token"]=$.cookie("auth_token")}).run(function(o){o.defaults.headers.post["X-CSRFToken"]=csrf_token});var LWBApp=angular.module("LWBApp",["ngRoute","http-auth-interceptor","LWBServices"],function(o){o.startSymbol("[["),o.endSymbol("]]")}).controller({RegistrationController:function(o,e,t,r){$("#login").show(),$("#logout").hide(),o.showModal=!1,o.toggleModal=function(){o.showModal=!o.showModal},o.submit=function(){e.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),e.defaults.headers.common["Content-Type"]="application/json",e.defaults.headers.common.Accept="application/json",e.post("/registration",JSON.stringify({email:o.email,company:o.company,password:o.password,password_confirm:o.password_confirm})).success(function(e){if(console.log(e),console.log(e.response.user),e.response.user)$("#login").hide(),$("#logout").show(),r.path("/onboarding/stick");else{var t=e.response.errors;t.hasOwnProperty("email")&&(o.email_error=!0),t.hasOwnProperty("company")&&(o.company_error=!0),t.hasOwnProperty("password")&&(o.password_error=!0),t.hasOwnProperty("password_confirm")&&(o.password_confirm_error=!0)}}).error(function(e){console.log("registration error"),o.errorMsg=e.reason})}}}).controller({LoginController:function(o,e,t){$("#logout").hide(),$("#login").show(),o.submit=function(){e.defaults.headers.post["X-CSRFToken"]=$("#csrf").val(),e.defaults.headers.common["Content-Type"]="application/json",e.defaults.headers.common.Accept="application/json",e.post("/login",JSON.stringify({email:o.email,password:o.password})).success(function(r){if(r.meta)var n=r.meta.code;else var n=r.status;if(200==n||302==n||301==n)$.cookie("email",o.email,{expires:7}),$.cookie("auth_token",r.authentication_token,{expires:7}),e.defaults.headers.common["Authentication-Token"]=r.authentication_token,t.loginConfirmed(),$("#login").hide(),$("#logout").show(),window.location="/dashboard";else if(r.hasOwnProperty("response")){var s=r.response.errors;s.hasOwnProperty("email")&&(o.email_error=s.email[0]),s.hasOwnProperty("password")&&(o.password_error=s.password[0])}}).error(function(e){o.errorMsg=e.reason})}}}).controller({NavController:function(o,e,t,r){o.click_login=function(){r.path("/signin")},o.click_logout=function(){$("#logout").hide(),$("#login").show(),e.defaults.headers.post["X-CSRFToken"]=$("#csrf").val(),o.logged_in=!1,e.get("/logout").success(function(){o.restrictedContent=[],$.cookie("auth_token",null),$.cookie("email",null),e.defaults.headers.common.Authorization=null,e.defaults.headers.common["Authentication-Token"]=null,window.location="/"}).error(function(){$.cookie("auth_token",null),e.defaults.headers.common.Authorization=null,window.location="/"})},o.scroll_to=function(o){r.hash(o),$anchorScroll()}}}).controller({HypothesesListController:function(o,e,t){t.get({},function(e){o.hypotheses=e.objects})}}).config(["$routeProvider","$locationProvider",function(o,e){o.when("/",{templateUrl:"static/partials/public.html",controller:MyCtrl1}).when("/dashboard",{templateUrl:"static/partials/dashboard.html",controller:DashboardController}).when("/onboarding/stick",{templateUrl:"/static/partials/onboarding/stick.html",controller:StickController}).when("/onboarding/virality",{templateUrl:"/static/partials/onboarding/virality.html",controller:ViralityController}).when("/onboarding/pay",{templateUrl:"/static/partials/onboarding/pay.html",controller:PayController}).when("/signin",{templateUrl:"static/partials/signin.html"}).when("/stats",{templateUrl:"/static/partials/measurements2.html",controller:MeasurementsController}).when("/stats/1",{templateUrl:"/static/partials/measurements.html",controller:MeasurementsController}).when("/export",{templateUrl:"/static/partials/export.html",controller:ExportController}).when("/connect/google-analytics/success",{templateUrl:"/static/partials/ga_success.html",controller:StickController}),e.html5Mode(!0)}]);angular.module("myApp.directives",[]).directive("appVersion",["version",function(o){return function(e,t){t.text(o)}}]),angular.module("LWBApp.filters",[]).filter("interpolate",["version",function(o){return function(e){return(e+"").replace(/\%VERSION\%/gm,o)}}]),angular.module("LWBServices",["ngResource"]).factory("Hypotheses",function(o){return o("/api/v1/hypotheses",{},{query:{method:"GET",isArray:!0}})}).factory("GoogleAnalytics",function(o){return o("/api/v1/google-analytics/",{},{query:{method:"POST",isArray:!0}})}).factory("Facebook",function(o){return o("/api/v1/facebook",{},{query:{method:"POST",isArray:!0}})}).factory("Quickbooks",function(o){return o("/api/v1/quickbooks",{},{query:{method:"POST",isArray:!0}})}).factory("Twitter",function(o){return o("/api/v1/twitter",{},{query:{method:"POST",isArray:!0}})});