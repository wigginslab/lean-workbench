function MyCtrl1(){}function MeasurementsController(o,t,e,r,n){e.get(),r.get(),n.get()}function ExportController(){}function EULAController(){}function PrivacyController(){}function ViewScaleController(o,t){$("#logout").show(),t.get("/api/v1/scale").success(function(t){t.hasOwnProperty("scale_authed")||(o.startup_data=t)}).error(function(){})}function ScaleController(o,t){t.get("/api/v1/scale").success(function(t){console.log(t),t.hasOwnProperty("scale_authed")||(o.description=t.description,o.angellist_url=t.angellist_url,o.crunchbase_url=t.crunchbase_url)}).error(function(o){console.log("error"),console.log(o)}),o.add_startup_data=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.defaults.headers.common["Content-Type"]="application/json",t.defaults.headers.common.Accept="application/json",t.post("/api/v1/scale",JSON.stringify({crunchbase_url:o.crunchbase_url,angellist_url:o.angellist_url,description:o.description})).success(function(t){o.request_sent=!0,o.help_msg=t.msg}).error(function(t){o.request_sent=!0,o.help_msg=t.msg})},o.done_onboarding=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/api/v1/users",JSON.stringify({onboarded:!0})).success(function(){window.location="/dashboard"})}}function WufooController(o,t){o.add_survey=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.defaults.headers.common["Content-Type"]="application/json",t.defaults.headers.common.Accept="application/json",t.post("/api/v1/wufoo",JSON.stringify({url:o.url,handshake:o.handshake,create:!0})).success(function(t){o.request_sent=!0,o.help_msg=t.msg}).error(function(t){o.help_msg=t.msg,o.request_sent=!0})},o.done_onboarding=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/api/v1/users",JSON.stringify({onboarded:!0})).success(function(){window.location="/dashboard"})}}function DashboardControllerTwo(o,t){$("#logout").show(),o.xAxisTickFormat=function(){return function(o){return d3.time.format("%x")(new Date(o))}},o.toolTipContentFunction=function(){return function(o,t,e){return alert("tooltip content"),"Super New Tooltip<h1>"+o+"</h1>"+"<p>"+e+" at "+t+"</p>"}},o.donutToolTipContentFunction=function(){return function(o,t){return"source: "+o+"<br>"+"sessions: "+t}},o.donutXFunction=function(){return function(o){return o.key}},o.donutYFunction=function(){return function(o){return o.y}},t.get("/api/v1/twitter").success(function(t){t.hasOwnProperty("twitter_authed")&&(o.has_twitterData=!1),o.twitterData=t,o.has_twitterData=!0}).error(function(){}),t.get("/api/v1/google-analytics?metric=visits").success(function(t){o.googleData=t,o.has_ga_data=!0}).error(function(){o.has_ga_data=!1}),t.get("/api/v1/google-analytics?metric=referrals").success(function(t){o.googleSourceData=t}).error(function(){}),t.get("/api/v1/facebook").success(function(t){t.hasOwnProperty("fb_authed")?o.has_fb_data=!1:(o.has_fb_data=!0,console.log(t),o.facebookData=t)}).error(function(){})}function DashboardController(o,t,e,r,n){$("#login").hide(),$("#logout").show(),$(".datepicker").datepicker({minDate:0}),t.get("/api/v1/hypotheses").success(function(t){o.hypotheses=t.hypotheses}).error(function(o){console.log(o)}),o.show_form=!1,o.hypothesis_submit=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.defaults.headers.common["Content-Type"]="application/json",t.defaults.headers.common.Accept="application/json",t.post("/api/v1/hypotheses",JSON.stringify({name:o.name,twitter:o.twitter})).success(function(o){o.response.user?n.path("/onboarding/stick"):o.response.errors}).error(function(t){console.log("registration error"),o.errorMsg=t.reason})},o.formData={},o.create_hypothesis=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.defaults.headers.common["Content-Type"]="application/json",t.defaults.headers.common.Accept="application/json",t({method:"POST",url:"/api/v1/hypotheses",data:o.formData,headers:{"Content-Type":"application/json"}}).success(function(t){if(t.hasOwnProperty("response"))if(t.response.hasOwnProperty("errors")){var e=t.response.errors;e===void 0?n.path="/dashboard":(e.hasOwnProperty("end_date")&&(o.end_date_error=!0,o.errorMsg="Improper end date."),e.hasOwnProperty("start_date")&&(o.start_date=!0,o.errorMsg="Improper start date"),e.hasOwnProperty("google_analytics.")&&(o.google_analytics=!0,o.errorMsg="Improper endpoint"),e.hasOwnProperty("title")&&(o.title=!0,o.errorMsg="Improper title."))}else o.show_form=!1,window.location="/dashboard";else o.show_form=!1,window.location="/dashboard"}).error(function(t){console.log("hypothesis error"),o.errorMsg=t.reason})},o.new_hypothesis=function(){o.show_form=!0}}function CarouselController(o,t,e){o.scroll_to=function(o){t.hash(o),e()}}function ErrorPageController(){}function OnboardingController(){}function StickController(o,t){$("#login").hide(),$("#logout").show(),o.has_GA=!1,o.GA_auth=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/connect/google-analytics").success(function(t){var e=t.authed;if(console.log(e),t.hasOwnProperty("redirect_url")){var r=t.redirect_url;window.location=r}1==e?o.has_GA=!0:t.hasOwnProperty("credentials")&&(o.has_GA=!0)})},t.get("/api/v1/google-analytics").success(function(t){o.GA_profiles=t}).error(function(){}),o.submit_prof=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/api/v1/google-analytics",JSON.stringify({metric:"profile-id",profile_id:o.user_profile})).success(function(o){200==o.status&&(window.location="/onboarding/virality")})}}function ViralityController(o,t,e){$("#login").hide(),$("#logout").show(),t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val();var r=e.get();r.length>0&&(o.FB=!0),o.has_FB=function(){return o.FB?!0:void 0},o.fb_auth=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/connect/facebook").success(function(o){var t=o.redirect_url;null!=t&&open(t)}).error(function(){console.log("error"),o.FB_error="Facebook authentication failed."})},o.has_twitter=!1,t.post("/api/v1/twitter?metric=authed").success(function(t){console.log(t),console.log(t[0]),t[0].twitter_authed&&(o.has_twitter=!0)}),o.has_fb=!1,t.post("/api/v1/facebook?metric=authed").success(function(t){t[0].fb_authed&&(o.has_fb=!0)}),o.twitter_auth=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/connect/twitter").success(function(o){var t=o.status;if(100==t){var e=o.redirect_url;window.location=e}}).error(function(){o.twitter_error="Twitter authentication failed."})},o.done_onboarding=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/api/v1/users",JSON.stringify({onboarded:!0})).success(function(){window.location="/dashboard"})}}function PayController(o,t){o.ghosting_clicked=!1,t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.get("/api/v1/quickbooks").success(function(t){t.qb_authed&&(o.has_qb=!0)}),o.qb_ghost=function(){t.post("/api/v1/ghosting",JSON.stringify({feature:"quickbooks"})).success(function(){o.ghosting_clicked=!0})},o.done_onboarding=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.post("/api/v1/users",JSON.stringify({onboarded:!0})).success(function(){window.location="/dashboard"})}}angular.module("LWBApp",["LWBAppServices","http-auth-interceptor","ngCookies","ngRoute"]).config(function(){$http.defaults.headers.common["Authentication-Token"]=$.cookie("auth_token")}).run(function(o){o.defaults.headers.post["X-CSRFToken"]=csrf_token});var LWBApp=angular.module("LWBApp",["ngRoute","http-auth-interceptor","LWBServices","nvd3ChartDirectives"],function(o){o.startSymbol("[["),o.endSymbol("]]")}).controller({RegistrationController:function(o,t,e,r){$("#login").show(),$("#logout").hide(),o.showModal=!1,o.toggleModal=function(){o.showModal=!o.showModal},o.submit=function(){t.defaults.headers.common["X-CSRFToken"]=$("#csrf").val(),t.defaults.headers.common["Content-Type"]="application/json",t.defaults.headers.common.Accept="application/json",t.post("/registration",JSON.stringify({email:o.email,company:o.company,password:o.password,password_confirm:o.password_confirm})).success(function(e){if(console.log(e),console.log(e.response.user),e.response.user)$("#login").hide(),$("#logout").show(),t.post("/api/v1/users",JSON.stringify({cohort:o.cohort})).success(function(o){console.log(o)}),r.path("/onboarding/stick");else{var n=e.response.errors;n.hasOwnProperty("email")&&(o.email_error=!0),n.hasOwnProperty("company")&&(o.company_error=!0),n.hasOwnProperty("password")&&(o.password_error=!0),n.hasOwnProperty("password_confirm")&&(o.password_confirm_error=!0)}}).error(function(t){console.log("registration error"),o.errorMsg=t.reason})}}}).controller({LoginController:function(o,t,e){$("#logout").hide(),$("#login").show(),o.submit=function(){t.defaults.headers.post["X-CSRFToken"]=$("#csrf").val(),t.defaults.headers.common["Content-Type"]="application/json",t.defaults.headers.common.Accept="application/json",t.post("/login",JSON.stringify({email:o.email,password:o.password})).success(function(r){if(r.meta)var n=r.meta.code;else var n=r.status;if(200==n||302==n||301==n)$.cookie("email",o.email,{expires:7}),$.cookie("auth_token",r.authentication_token,{expires:7}),t.defaults.headers.common["Authentication-Token"]=r.authentication_token,e.loginConfirmed(),$("#login").hide(),$("#logout").show(),window.location="/dashboard";else if(r.hasOwnProperty("response")){var s=r.response.errors;s.hasOwnProperty("email")&&(o.email_error=s.email[0]),s.hasOwnProperty("password")&&(o.password_error=s.password[0])}}).error(function(t){o.errorMsg=t.reason})}}}).controller({NavController:function(o,t,e,r){o.click_login=function(){r.path("/signin")},o.click_logout=function(){$("#logout").hide(),$("#login").show(),t.defaults.headers.post["X-CSRFToken"]=$("#csrf").val(),o.logged_in=!1,t.get("/logout").success(function(){o.restrictedContent=[],$.cookie("auth_token",null),$.cookie("email",null),t.defaults.headers.common.Authorization=null,t.defaults.headers.common["Authentication-Token"]=null,window.location="/"}).error(function(){$.cookie("auth_token",null),t.defaults.headers.common.Authorization=null,window.location="/"})},o.scroll_to=function(o){r.hash(o),$anchorScroll()}}}).controller({HypothesesListController:function(o,t,e){e.get({},function(t){o.hypotheses=t.objects})}}).config(["$routeProvider","$locationProvider",function(o,t){o.when("/",{templateUrl:"static/partials/public.html",controller:MyCtrl1}).when("/results",{templateUrl:"static/partials/dashboard2.html",controller:DashboardControllerTwo}).when("/dashboard",{templateUrl:"static/partials/dashboard2.html",controller:DashboardControllerTwo}).when("/onboarding/stick",{templateUrl:"/static/partials/onboarding/stick.html",controller:StickController}).when("/onboarding/virality",{templateUrl:"/static/partials/onboarding/virality.html",controller:ViralityController}).when("/onboarding/pay",{templateUrl:"/static/partials/onboarding/pay.html",controller:PayController}).when("/signin",{templateUrl:"static/partials/signin.html"}).when("/stats",{templateUrl:"/static/partials/measurements2.html",controller:MeasurementsController}).when("/stats/1",{templateUrl:"/static/partials/measurements.html",controller:MeasurementsController}).when("/export",{templateUrl:"/static/partials/export.html",controller:ExportController}).when("/connect/google-analytics/success",{templateUrl:"/static/partials/ga_success.html",controller:StickController}).when("/onboarding/empathy",{templateUrl:"/static/partials/onboarding/wufoo.html",controller:WufooController}).when("/onboarding/scale",{templateUrl:"/static/partials/onboarding/scale.html",controller:ScaleController}).when("/scale",{templateUrl:"/static/partials/scale.html",controller:ViewScaleController}).when("/privacy",{templateUrl:"/static/partials/privacy.html",controller:PrivacyController}).when("/eula",{templateUrl:"/static/partials/eula.html",controller:EULAController}),t.html5Mode(!0)}]);angular.module("myApp.directives",[]).directive("appVersion",["version",function(o){return function(t,e){e.text(o)}}]),angular.module("LWBApp.filters",[]).filter("interpolate",["version",function(o){return function(t){return(t+"").replace(/\%VERSION\%/gm,o)}}]),angular.module("LWBServices",["ngResource"]).factory("Hypotheses",function(o){return o("/api/v1/hypotheses",{},{query:{method:"GET",isArray:!0}})}).factory("GoogleAnalytics",function(o){return o("/api/v1/google-analytics/",{},{query:{method:"POST",isArray:!0}})}).factory("Facebook",function(o){return o("/api/v1/facebook",{},{query:{method:"POST",isArray:!0}})}).factory("Quickbooks",function(o){return o("/api/v1/quickbooks",{},{query:{method:"POST",isArray:!0}})}).factory("Twitter",function(o){return o("/api/v1/twitter",{},{query:{method:"POST",isArray:!0}})});